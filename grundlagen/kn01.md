### Aufgabe 1

**Formen von Tests:**

*   **Nach Testebene:**
    *   Unit-Test (Modul-/Komponententest)
    *   Integrationstest
    *   Systemtest
    *   Abnahmetest (Acceptance Test)
*   **Nach Testart (Fokus):**
    *   Funktionale Tests (Black-Box-Tests)
    *   Nicht-funktionale Tests (Last-, Performance-, Sicherheitstests)
    *   Strukturelle Tests (White-Box-Tests)
    *   Regressionstests

**Drei Beispiele aus der Praxis:**

#### 1. Unit-Tests (Modultests)
*   **Erläuterung:** Testen der kleinsten, isolierten Einheit einer Software (z.B. eine einzelne Funktion oder Klasse). Ziel ist die Verifikation der korrekten Logik dieser Einheit.
*   **Durchführung:** Meist automatisiert durch den Entwickler selbst. Mit Frameworks wie JUnit (Java) oder pytest (Python) werden Testfälle geschrieben, die definierte Eingaben an die Funktion übergeben und das Ergebnis mit einem erwarteten Wert vergleichen.

#### 2. Integrationstests
*   **Erläuterung:** Testen des Zusammenspiels mehrerer Komponenten. Beispiel: Eine Funktion ruft Daten aus einer Datenbank ab und verarbeitet sie. Der Test prüft, ob die Kommunikation zwischen Applikationscode und Datenbank korrekt funktioniert.
*   **Durchführung:** Oft automatisiert. Es wird eine Testumgebung mit den notwendigen Komponenten (z.B. eine Test-Datenbank) aufgesetzt. Der Test ruft eine Schnittstelle (z.B. eine API) auf und prüft, ob die Daten korrekt in der Datenbank ankommen oder ausgelesen werden.

#### 3. User Acceptance Tests (UAT) / Abnahmetests
*   **Erläuterung:** Test aus der Perspektive des Endanwenders oder Auftraggebers. Es wird geprüft, ob die Software die Anforderungen aus der Praxis erfüllt und für den produktiven Einsatz geeignet ist.
*   **Durchführung:** Meist manuell. Testpersonen (z.B. Fachanwender, Product Owner) führen vordefinierte Anwendungsfälle (z.B. "Lege einen neuen Kunden an und erstelle für ihn eine Rechnung") in einer testnahen Umgebung durch und protokollieren die Ergebnisse.

---

### Aufgabe 2

**SW-Fehler vs. SW-Mangel**

*   **Beispiel SW-Fehler (Bug):** In einem Onlineshop werden bei der Berechnung der Summe im Warenkorb zwei Artikel addiert: `50€ + 30€ = 70€`. Das Programm rechnet falsch und zeigt `80€` an. Die Software verhält sich nicht gemäß ihrer Spezifikation.
*   **Beispiel SW-Mangel:** Eine Software zur Zeiterfassung funktioniert technisch einwandfrei. Sie erlaubt aber keine rückwirkenden Korrekturen von Fehleingaben. Obwohl sie fehlerfrei programmiert ist, erfüllt sie eine wesentliche Anforderung der Nutzer nicht und ist daher für den Praxiseinsatz ungeeignet.

**Hoher Schaden durch SW-Fehler**

*   **Ariane 5 (Flug 501):** Ein Konvertierungsfehler in der Steuerungssoftware führte 1996 zur Selbstzerstörung der Rakete kurz nach dem Start. Ein 64-Bit-Gleitkommawert wurde fälschlicherweise in eine 16-Bit-Ganzzahl konvertiert, was einen Überlauf und den Ausfall des Trägheitsnavigationssystems verursachte. Der finanzielle Schaden betrug über 370 Millionen US-Dollar.


### Aufgabe 3
---
**Fehler behebung:**
```java
public class Preisberechnung {

    /**
     * Berechnet den Endpreis eines Autos basierend auf verschiedenen Komponenten und Rabatten.
     * Diese Version ist korrigiert.
     *
     * @param baseprice      Grundpreis
     * @param specialprice   Sondermodellaufschlag
     * @param extraprice     Preis für Zusatzausstattung
     * @param extras         Anzahl der Zusatzausstattungen
     * @param discount       Händlerrabatt in Prozent (z.B. 10 für 10%)
     * @return Der berechnete Endpreis
     */
    public double calculatePriceFixed(double baseprice, double specialprice, double extraprice, int extras, double discount) {
        double addon_discount;

        // Fehler 1 korrigiert: Spezifischste Bedingung (>= 5) zuerst prüfen.
        if (extras >= 5) {
            addon_discount = 15.0;
        } else if (extras >= 3) {
            addon_discount = 10.0;
        } else {
            addon_discount = 0.0;
        }

        // Fehler 2 korrigiert: Fehlerhafte Vermischung der Rabatte wurde entfernt.

        double result = baseprice / 100.0 * (100.0 - discount)
                      + specialprice
                      + extraprice / 100.0 * (100.0 - addon_discount);

        return result;
    }
}
```


**Testtreiber mit testfällen:**
Der folgende code ruft die korrigierte Methode mit verschiedenen Werten auf und vergleicht das Ergebnis mit einem manuell berechneten, erwarteten Wert.
```java
public class Testtreiber {

    public static boolean test_calculate_price() {
        Preisberechnung rechner = new Preisberechnung();
        boolean all_tests_ok = true;
        final double EPSILON = 0.001; // Toleranz für double-Vergleiche

        // --- Testfall 1: Weniger als 3 Extras, kein Zubehör-Rabatt ---
        double price1 = rechner.calculatePriceFixed(20000, 1000, 500, 2, 10);
        double expected1 = 20000 * 0.90 + 1000 + 500; // 18000 + 1000 + 500 = 19500
        if (Math.abs(price1 - expected1) > EPSILON) {
            System.out.println("FEHLER bei Testfall 1: Erwartet=" + expected1 + ", Bekommen=" + price1);
            all_tests_ok = false;
        } else {
            System.out.println("Testfall 1 OK");
        }

        // --- Testfall 2: Genau 3 Extras, 10% Zubehör-Rabatt ---
        double price2 = rechner.calculatePriceFixed(30000, 0, 2000, 3, 5);
        double expected2 = 30000 * 0.95 + 0 + (2000 * 0.90); // 28500 + 1800 = 30300
        if (Math.abs(price2 - expected2) > EPSILON) {
            System.out.println("FEHLER bei Testfall 2: Erwartet=" + expected2 + ", Bekommen=" + price2);
            all_tests_ok = false;
        } else {
            System.out.println("Testfall 2 OK");
        }
        
        // --- Testfall 3: Genau 5 Extras, 15% Zubehör-Rabatt ---
        double price3 = rechner.calculatePriceFixed(50000, 5000, 4000, 5, 20);
        double expected3 = 50000 * 0.80 + 5000 + (4000 * 0.85); // 40000 + 5000 + 3400 = 48400
        if (Math.abs(price3 - expected3) > EPSILON) {
            System.out.println("FEHLER bei Testfall 3: Erwartet=" + expected3 + ", Bekommen=" + price3);
            all_tests_ok = false;
        } else {
            System.out.println("Testfall 3 OK");
        }

        // --- Testfall 4: Mehr als 5 Extras, 15% Zubehör-Rabatt ---
        double price4 = rechner.calculatePriceFixed(50000, 5000, 4000, 7, 20);
        double expected4 = 50000 * 0.80 + 5000 + (4000 * 0.85); // 40000 + 5000 + 3400 = 48400
        if (Math.abs(price4 - expected4) > EPSILON) {
            System.out.println("FEHLER bei Testfall 4: Erwartet=" + expected4 + ", Bekommen=" + price4);
            all_tests_ok = false;
        } else {
            System.out.println("Testfall 4 OK");
        }

        return all_tests_ok;
    }

    // Hauptmethode zum Starten des Testtreibers
    public static void main(String[] args) {
        System.out.println("Starte Tests für Preisberechnung...");
        boolean success = test_calculate_price();
        System.out.println("------------------------------------");
        if (success) {
            System.out.println("ERGEBNIS: Alle Tests erfolgreich bestanden!");
        } else {
            System.out.println("ERGEBNIS: Mindestens ein Test ist fehlgeschlagen!");
        }
    }
}
```